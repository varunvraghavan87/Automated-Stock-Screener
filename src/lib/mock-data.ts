import type { StockData, TechnicalIndicators, WeeklyTrendHealth, DivergenceResult } from "./types";
import { EMPTY_DIVERGENCE_RESULT } from "./types";

// Weekly trend presets for mock data
const WEEKLY_ALIGNED: WeeklyTrendHealth = {
  closeAboveEMA20: true, rsiAbove40: true, macdHistPositive: true,
  weeklyEMA20: 0, weeklyRSI: 58, weeklyMACDHist: 2.5, weeklyClose: 0,
  aligned: true, score: 5, status: 'aligned',
};
const WEEKLY_MIXED: WeeklyTrendHealth = {
  closeAboveEMA20: true, rsiAbove40: true, macdHistPositive: false,
  weeklyEMA20: 0, weeklyRSI: 52, weeklyMACDHist: -0.5, weeklyClose: 0,
  aligned: false, score: 0, status: 'mixed',
};
const WEEKLY_COUNTER: WeeklyTrendHealth = {
  closeAboveEMA20: false, rsiAbove40: false, macdHistPositive: false,
  weeklyEMA20: 0, weeklyRSI: 35, weeklyMACDHist: -3.0, weeklyClose: 0,
  aligned: false, score: -10, status: 'counter-trend',
};

// Helper to create weekly trend with specific close/EMA values
function makeWeekly(
  base: WeeklyTrendHealth,
  weeklyClose: number,
  weeklyEMA20: number
): WeeklyTrendHealth {
  return { ...base, weeklyClose, weeklyEMA20 };
}

// Divergence presets for mock data
const NO_DIVERGENCE: DivergenceResult = EMPTY_DIVERGENCE_RESULT;

const BULLISH_RSI_DIV: DivergenceResult = {
  divergences: [{
    type: 'bullish_rsi',
    direction: 'bullish',
    priceSwing1: { index: 30, value: 142.0, type: 'low' },
    priceSwing2: { index: 45, value: 139.5, type: 'low' },
    indicatorSwing1: { index: 30, value: 35.0, type: 'low' },
    indicatorSwing2: { index: 45, value: 42.0, type: 'low' },
    strength: 0.72,
    barsAgo: 5,
    scoreImpact: 8,
    description: 'üìà Bullish RSI divergence: price made lower low but RSI made higher low ‚Äî momentum strengthening',
  }],
  hasBullish: true,
  hasBearish: false,
  netScoreImpact: 8,
  summary: 'Bullish RSI divergence detected (recent)',
};

const BEARISH_RSI_DIV: DivergenceResult = {
  divergences: [{
    type: 'bearish_rsi',
    direction: 'bearish',
    priceSwing1: { index: 28, value: 690.0, type: 'high' },
    priceSwing2: { index: 42, value: 698.0, type: 'high' },
    indicatorSwing1: { index: 28, value: 68.0, type: 'high' },
    indicatorSwing2: { index: 42, value: 58.0, type: 'high' },
    strength: 0.65,
    barsAgo: 8,
    scoreImpact: -10,
    description: 'üìâ Bearish RSI divergence: price made higher high but RSI made lower high ‚Äî momentum weakening',
  }],
  hasBullish: false,
  hasBearish: true,
  netScoreImpact: -10,
  summary: 'Bearish RSI divergence detected ‚Äî caution',
};

const OBV_WARNING: DivergenceResult = {
  divergences: [{
    type: 'obv_divergence',
    direction: 'bearish',
    priceSwing1: { index: 25, value: 3880.0, type: 'high' },
    priceSwing2: { index: 40, value: 3920.0, type: 'high' },
    indicatorSwing1: { index: 25, value: 30000000, type: 'high' },
    indicatorSwing2: { index: 40, value: 28500000, type: 'high' },
    strength: 0.45,
    barsAgo: 10,
    scoreImpact: -5,
    description: '‚ö†Ô∏è OBV divergence: price rising but volume flow declining ‚Äî distribution possible',
  }],
  hasBullish: false,
  hasBearish: true,
  netScoreImpact: -5,
  summary: 'OBV volume divergence warning',
};

// Realistic mock data for Indian equities that match various screener outcomes
export const MOCK_STOCKS: Array<{
  stock: StockData;
  indicators: TechnicalIndicators;
}> = [
  // STRONG BUY candidates - perfect pullback setups with all indicators bullish
  {
    stock: {
      symbol: "TATASTEEL",
      name: "Tata Steel Ltd",
      exchange: "NSE",
      sector: "Metals & Mining",
      marketCap: 185000,
      lastPrice: 145.2,
      change: -2.8,
      changePercent: -1.89,
      volume: 42000000,
      avgDailyTurnover: 42.5,
      open: 148.0,
      high: 148.5,
      low: 144.8,
      close: 145.2,
      previousClose: 148.0,
    },
    indicators: {
      ema20: 143.5, ema50: 140.2, ema200: 132.8,
      rsi14: 52.2, adx14: 32.5, plusDI: 28.5, minusDI: 14.2,
      atr14: 3.8, relativeStrength3M: 4.2, volumeSMA20: 32000000,
      volumeRecent3: [28000000, 35000000, 42000000] as [number, number, number], vroc20: 135,
      weekChange: -2.1,
      macdLine: 1.8, macdSignal: 1.2, macdHistogram: 0.6,
      stochasticK: 58.5, stochasticD: 54.2,
      williamsR: -38.5, roc14: 3.2, cci20: 65.0,
      bollingerUpper: 152.0, bollingerMiddle: 144.5, bollingerLower: 137.0,
      bollingerPercentB: 0.55, bollingerBandwidth: 0.104,
      obv: 125000000, obvTrend: "up",
      mfi14: 58.0,
      adLineTrend: "up",
      superTrend: 138.5, superTrendDirection: "up",
      parabolicSAR: 141.2, sarTrend: "up",
      ichimokuTenkan: 144.0, ichimokuKijun: 142.0,
      ichimokuSenkouA: 143.0, ichimokuSenkouB: 139.0, ichimokuCloudSignal: "above",
      weeklyTrend: makeWeekly(WEEKLY_ALIGNED, 145.2, 140.0),
      divergences: BULLISH_RSI_DIV,
    },
  },
  {
    stock: {
      symbol: "HDFCBANK",
      name: "HDFC Bank Ltd",
      exchange: "NSE",
      sector: "Banking",
      marketCap: 1250000,
      lastPrice: 1685.0,
      change: -18.5,
      changePercent: -1.09,
      volume: 18000000,
      avgDailyTurnover: 215.0,
      open: 1700.0,
      high: 1705.0,
      low: 1680.0,
      close: 1685.0,
      previousClose: 1703.5,
    },
    indicators: {
      ema20: 1678.0, ema50: 1652.0, ema200: 1580.0,
      rsi14: 53.5, adx14: 28.7, plusDI: 25.0, minusDI: 16.8,
      atr14: 22.5, relativeStrength3M: 6.8, volumeSMA20: 14200000,
      volumeRecent3: [12000000, 15000000, 18000000] as [number, number, number], vroc20: 128,
      weekChange: -1.5,
      macdLine: 12.5, macdSignal: 9.8, macdHistogram: 2.7,
      stochasticK: 62.0, stochasticD: 58.0,
      williamsR: -32.0, roc14: 2.8, cci20: 55.0,
      bollingerUpper: 1720.0, bollingerMiddle: 1680.0, bollingerLower: 1640.0,
      bollingerPercentB: 0.56, bollingerBandwidth: 0.048,
      obv: 89000000, obvTrend: "up",
      mfi14: 62.0,
      adLineTrend: "up",
      superTrend: 1640.0, superTrendDirection: "up",
      parabolicSAR: 1665.0, sarTrend: "up",
      ichimokuTenkan: 1680.0, ichimokuKijun: 1665.0,
      ichimokuSenkouA: 1672.0, ichimokuSenkouB: 1650.0, ichimokuCloudSignal: "above",
      weeklyTrend: makeWeekly(WEEKLY_ALIGNED, 1685.0, 1640.0),
      divergences: NO_DIVERGENCE,
    },
  },
  {
    stock: {
      symbol: "RELIANCE",
      name: "Reliance Industries Ltd",
      exchange: "NSE",
      sector: "Energy",
      marketCap: 1820000,
      lastPrice: 2685.0,
      change: -32.0,
      changePercent: -1.18,
      volume: 12000000,
      avgDailyTurnover: 225.0,
      open: 2710.0,
      high: 2718.0,
      low: 2678.0,
      close: 2685.0,
      previousClose: 2717.0,
    },
    indicators: {
      ema20: 2672.0, ema50: 2640.0, ema200: 2520.0,
      rsi14: 50.8, adx14: 30.2, plusDI: 26.0, minusDI: 15.5,
      atr14: 38.5, relativeStrength3M: 3.5, volumeSMA20: 9500000,
      volumeRecent3: [8000000, 10000000, 12000000] as [number, number, number], vroc20: 130,
      weekChange: -2.8,
      macdLine: 15.0, macdSignal: 11.0, macdHistogram: 4.0,
      stochasticK: 55.0, stochasticD: 52.0,
      williamsR: -42.0, roc14: 1.8, cci20: 42.0,
      bollingerUpper: 2750.0, bollingerMiddle: 2680.0, bollingerLower: 2610.0,
      bollingerPercentB: 0.54, bollingerBandwidth: 0.052,
      obv: 75000000, obvTrend: "up",
      mfi14: 55.0,
      adLineTrend: "up",
      superTrend: 2610.0, superTrendDirection: "up",
      parabolicSAR: 2650.0, sarTrend: "up",
      ichimokuTenkan: 2678.0, ichimokuKijun: 2660.0,
      ichimokuSenkouA: 2669.0, ichimokuSenkouB: 2640.0, ichimokuCloudSignal: "above",
      weeklyTrend: makeWeekly(WEEKLY_ALIGNED, 2685.0, 2610.0),
      divergences: NO_DIVERGENCE,
    },
  },
  // BUY candidates - good but not perfect
  {
    stock: {
      symbol: "INFY",
      name: "Infosys Ltd",
      exchange: "NSE",
      sector: "IT Services",
      marketCap: 620000,
      lastPrice: 1520.0,
      change: -12.0,
      changePercent: -0.78,
      volume: 13500000,
      avgDailyTurnover: 152.0,
      open: 1530.0,
      high: 1535.0,
      low: 1518.0,
      close: 1520.0,
      previousClose: 1532.0,
    },
    indicators: {
      ema20: 1510.0, ema50: 1485.0, ema200: 1420.0,
      rsi14: 52.3, adx14: 27.8, plusDI: 22.0, minusDI: 17.5,
      atr14: 18.2, relativeStrength3M: 2.1, volumeSMA20: 11200000,
      volumeRecent3: [10000000, 12000000, 13500000] as [number, number, number], vroc20: 122,
      weekChange: -1.2,
      macdLine: 8.0, macdSignal: 6.5, macdHistogram: 1.5,
      stochasticK: 54.0, stochasticD: 51.5,
      williamsR: -40.0, roc14: 1.5, cci20: 35.0,
      bollingerUpper: 1555.0, bollingerMiddle: 1515.0, bollingerLower: 1475.0,
      bollingerPercentB: 0.56, bollingerBandwidth: 0.053,
      obv: 45000000, obvTrend: "up",
      mfi14: 52.0,
      adLineTrend: "up",
      superTrend: 1470.0, superTrendDirection: "up",
      parabolicSAR: 1498.0, sarTrend: "up",
      ichimokuTenkan: 1515.0, ichimokuKijun: 1500.0,
      ichimokuSenkouA: 1507.0, ichimokuSenkouB: 1490.0, ichimokuCloudSignal: "above",
      weeklyTrend: makeWeekly(WEEKLY_ALIGNED, 1520.0, 1475.0),
      divergences: BULLISH_RSI_DIV,
    },
  },
  {
    stock: {
      symbol: "BAJFINANCE",
      name: "Bajaj Finance Ltd",
      exchange: "NSE",
      sector: "NBFC",
      marketCap: 480000,
      lastPrice: 7850.0,
      change: -95.0,
      changePercent: -1.20,
      volume: 4800000,
      avgDailyTurnover: 258.0,
      open: 7920.0,
      high: 7940.0,
      low: 7820.0,
      close: 7850.0,
      previousClose: 7945.0,
    },
    indicators: {
      ema20: 7810.0, ema50: 7680.0, ema200: 7200.0,
      rsi14: 48.1, adx14: 26.5, plusDI: 23.0, minusDI: 18.0,
      atr14: 110.0, relativeStrength3M: 5.8, volumeSMA20: 3800000,
      volumeRecent3: [3500000, 4200000, 4800000] as [number, number, number], vroc20: 126,
      weekChange: -3.2,
      macdLine: 45.0, macdSignal: 38.0, macdHistogram: 7.0,
      stochasticK: 42.0, stochasticD: 45.0,
      williamsR: -55.0, roc14: 1.2, cci20: 18.0,
      bollingerUpper: 8050.0, bollingerMiddle: 7830.0, bollingerLower: 7610.0,
      bollingerPercentB: 0.55, bollingerBandwidth: 0.056,
      obv: 32000000, obvTrend: "up",
      mfi14: 48.0,
      adLineTrend: "up",
      superTrend: 7550.0, superTrendDirection: "up",
      parabolicSAR: 7720.0, sarTrend: "up",
      ichimokuTenkan: 7835.0, ichimokuKijun: 7760.0,
      ichimokuSenkouA: 7797.0, ichimokuSenkouB: 7700.0, ichimokuCloudSignal: "above",
      weeklyTrend: makeWeekly(WEEKLY_MIXED, 7850.0, 7700.0),
      divergences: NO_DIVERGENCE,
    },
  },
  {
    stock: {
      symbol: "TCS",
      name: "Tata Consultancy Services",
      exchange: "NSE",
      sector: "IT Services",
      marketCap: 1420000,
      lastPrice: 3920.0,
      change: -28.0,
      changePercent: -0.71,
      volume: 6000000,
      avgDailyTurnover: 165.0,
      open: 3945.0,
      high: 3950.0,
      low: 3910.0,
      close: 3920.0,
      previousClose: 3948.0,
    },
    indicators: {
      ema20: 3905.0, ema50: 3870.0, ema200: 3720.0,
      rsi14: 50.8, adx14: 26.2, plusDI: 21.5, minusDI: 17.0,
      atr14: 42.0, relativeStrength3M: 1.9, volumeSMA20: 4800000,
      volumeRecent3: [5200000, 5000000, 6000000] as [number, number, number], vroc20: 110,
      weekChange: -1.8,
      macdLine: 10.0, macdSignal: 7.5, macdHistogram: 2.5,
      stochasticK: 52.0, stochasticD: 50.0,
      williamsR: -45.0, roc14: 0.8, cci20: 22.0,
      bollingerUpper: 3990.0, bollingerMiddle: 3920.0, bollingerLower: 3850.0,
      bollingerPercentB: 0.50, bollingerBandwidth: 0.036,
      obv: 28000000, obvTrend: "flat",
      mfi14: 50.0,
      adLineTrend: "flat",
      superTrend: 3830.0, superTrendDirection: "up",
      parabolicSAR: 3880.0, sarTrend: "up",
      ichimokuTenkan: 3915.0, ichimokuKijun: 3890.0,
      ichimokuSenkouA: 3902.0, ichimokuSenkouB: 3870.0, ichimokuCloudSignal: "above",
      weeklyTrend: makeWeekly(WEEKLY_ALIGNED, 3920.0, 3850.0),
      divergences: OBV_WARNING,
    },
  },
  // WATCH candidates - trend established but no pullback yet
  {
    stock: {
      symbol: "ICICIBANK",
      name: "ICICI Bank Ltd",
      exchange: "NSE",
      sector: "Banking",
      marketCap: 780000,
      lastPrice: 1125.0,
      change: 8.5,
      changePercent: 0.76,
      volume: 15200000,
      avgDailyTurnover: 175.0,
      open: 1118.0,
      high: 1128.0,
      low: 1115.0,
      close: 1125.0,
      previousClose: 1116.5,
    },
    indicators: {
      ema20: 1105.0, ema50: 1080.0, ema200: 1020.0,
      rsi14: 62.5, adx14: 31.2, plusDI: 30.0, minusDI: 12.0,
      atr14: 15.0, relativeStrength3M: 7.2, volumeSMA20: 14500000,
      volumeRecent3: [13000000, 14000000, 15200000] as [number, number, number], vroc20: 118,
      weekChange: 2.5,
      macdLine: 10.0, macdSignal: 8.0, macdHistogram: 2.0,
      stochasticK: 78.0, stochasticD: 72.0,
      williamsR: -15.0, roc14: 5.2, cci20: 120.0,
      bollingerUpper: 1140.0, bollingerMiddle: 1108.0, bollingerLower: 1076.0,
      bollingerPercentB: 0.77, bollingerBandwidth: 0.058,
      obv: 65000000, obvTrend: "up",
      mfi14: 68.0,
      adLineTrend: "up",
      superTrend: 1065.0, superTrendDirection: "up",
      parabolicSAR: 1095.0, sarTrend: "up",
      ichimokuTenkan: 1115.0, ichimokuKijun: 1100.0,
      ichimokuSenkouA: 1107.0, ichimokuSenkouB: 1085.0, ichimokuCloudSignal: "above",
      weeklyTrend: makeWeekly(WEEKLY_MIXED, 1125.0, 1090.0),
      divergences: OBV_WARNING,
    },
  },
  {
    stock: {
      symbol: "BHARTIARTL",
      name: "Bharti Airtel Ltd",
      exchange: "NSE",
      sector: "Telecom",
      marketCap: 850000,
      lastPrice: 1580.0,
      change: 12.0,
      changePercent: 0.77,
      volume: 5800000,
      avgDailyTurnover: 95.0,
      open: 1570.0,
      high: 1585.0,
      low: 1568.0,
      close: 1580.0,
      previousClose: 1568.0,
    },
    indicators: {
      ema20: 1555.0, ema50: 1520.0, ema200: 1410.0,
      rsi14: 65.8, adx14: 34.5, plusDI: 32.0, minusDI: 10.0,
      atr14: 20.0, relativeStrength3M: 8.5, volumeSMA20: 6200000,
      volumeRecent3: [5500000, 5800000, 5800000] as [number, number, number], vroc20: 95,
      weekChange: 3.1,
      macdLine: 18.0, macdSignal: 14.0, macdHistogram: 4.0,
      stochasticK: 82.0, stochasticD: 76.0,
      williamsR: -12.0, roc14: 6.5, cci20: 145.0,
      bollingerUpper: 1600.0, bollingerMiddle: 1560.0, bollingerLower: 1520.0,
      bollingerPercentB: 0.75, bollingerBandwidth: 0.051,
      obv: 42000000, obvTrend: "up",
      mfi14: 72.0,
      adLineTrend: "up",
      superTrend: 1500.0, superTrendDirection: "up",
      parabolicSAR: 1545.0, sarTrend: "up",
      ichimokuTenkan: 1570.0, ichimokuKijun: 1550.0,
      ichimokuSenkouA: 1560.0, ichimokuSenkouB: 1530.0, ichimokuCloudSignal: "above",
      weeklyTrend: makeWeekly(WEEKLY_ALIGNED, 1580.0, 1520.0),
      divergences: NO_DIVERGENCE,
    },
  },
  // NEUTRAL - passes Phase 1 but fails Phase 2
  {
    stock: {
      symbol: "SBIN",
      name: "State Bank of India",
      exchange: "NSE",
      sector: "Banking",
      marketCap: 620000,
      lastPrice: 680.0,
      change: -4.5,
      changePercent: -0.66,
      volume: 22000000,
      avgDailyTurnover: 155.0,
      open: 683.0,
      high: 685.0,
      low: 678.0,
      close: 680.0,
      previousClose: 684.5,
    },
    indicators: {
      ema20: 685.0, ema50: 690.0, ema200: 670.0,
      rsi14: 42.0, adx14: 18.5, plusDI: 15.0, minusDI: 20.0,
      atr14: 8.5, relativeStrength3M: -2.1, volumeSMA20: 25000000,
      volumeRecent3: [24000000, 23000000, 22000000] as [number, number, number], vroc20: 88,
      weekChange: -3.5,
      macdLine: -2.5, macdSignal: -1.0, macdHistogram: -1.5,
      stochasticK: 32.0, stochasticD: 38.0,
      williamsR: -72.0, roc14: -1.8, cci20: -45.0,
      bollingerUpper: 700.0, bollingerMiddle: 686.0, bollingerLower: 672.0,
      bollingerPercentB: 0.29, bollingerBandwidth: 0.041,
      obv: -15000000, obvTrend: "down",
      mfi14: 38.0,
      adLineTrend: "down",
      superTrend: 695.0, superTrendDirection: "down",
      parabolicSAR: 692.0, sarTrend: "down",
      ichimokuTenkan: 682.0, ichimokuKijun: 688.0,
      ichimokuSenkouA: 685.0, ichimokuSenkouB: 690.0, ichimokuCloudSignal: "below",
      weeklyTrend: makeWeekly(WEEKLY_COUNTER, 680.0, 695.0),
      divergences: BEARISH_RSI_DIV,
    },
  },
  {
    stock: {
      symbol: "WIPRO",
      name: "Wipro Ltd",
      exchange: "NSE",
      sector: "IT Services",
      marketCap: 255000,
      lastPrice: 485.0,
      change: -2.0,
      changePercent: -0.41,
      volume: 8500000,
      avgDailyTurnover: 42.0,
      open: 487.0,
      high: 488.0,
      low: 484.0,
      close: 485.0,
      previousClose: 487.0,
    },
    indicators: {
      ema20: 488.0, ema50: 492.0, ema200: 480.0,
      rsi14: 38.5, adx14: 15.2, plusDI: 14.0, minusDI: 22.0,
      atr14: 6.2, relativeStrength3M: -1.5, volumeSMA20: 9800000,
      volumeRecent3: [9500000, 9000000, 8500000] as [number, number, number], vroc20: 82,
      weekChange: -2.8,
      macdLine: -1.8, macdSignal: -0.5, macdHistogram: -1.3,
      stochasticK: 28.0, stochasticD: 35.0,
      williamsR: -78.0, roc14: -2.5, cci20: -68.0,
      bollingerUpper: 498.0, bollingerMiddle: 489.0, bollingerLower: 480.0,
      bollingerPercentB: 0.28, bollingerBandwidth: 0.037,
      obv: -8000000, obvTrend: "down",
      mfi14: 35.0,
      adLineTrend: "down",
      superTrend: 496.0, superTrendDirection: "down",
      parabolicSAR: 493.0, sarTrend: "down",
      ichimokuTenkan: 486.0, ichimokuKijun: 490.0,
      ichimokuSenkouA: 488.0, ichimokuSenkouB: 492.0, ichimokuCloudSignal: "below",
      weeklyTrend: makeWeekly(WEEKLY_COUNTER, 485.0, 495.0),
      divergences: BEARISH_RSI_DIV,
    },
  },
  // More BUY/STRONG BUY candidates
  {
    stock: {
      symbol: "LT",
      name: "Larsen & Toubro Ltd",
      exchange: "NSE",
      sector: "Infrastructure",
      marketCap: 520000,
      lastPrice: 3720.0,
      change: -45.0,
      changePercent: -1.20,
      volume: 5200000,
      avgDailyTurnover: 135.0,
      open: 3760.0,
      high: 3770.0,
      low: 3710.0,
      close: 3720.0,
      previousClose: 3765.0,
    },
    indicators: {
      ema20: 3700.0, ema50: 3650.0, ema200: 3480.0,
      rsi14: 51.5, adx14: 29.8, plusDI: 24.5, minusDI: 16.0,
      atr14: 52.0, relativeStrength3M: 4.8, volumeSMA20: 4200000,
      volumeRecent3: [3800000, 4500000, 5200000] as [number, number, number], vroc20: 125,
      weekChange: -2.5,
      macdLine: 20.0, macdSignal: 16.0, macdHistogram: 4.0,
      stochasticK: 55.0, stochasticD: 52.0,
      williamsR: -42.0, roc14: 2.0, cci20: 38.0,
      bollingerUpper: 3810.0, bollingerMiddle: 3730.0, bollingerLower: 3650.0,
      bollingerPercentB: 0.44, bollingerBandwidth: 0.043,
      obv: 38000000, obvTrend: "up",
      mfi14: 55.0,
      adLineTrend: "up",
      superTrend: 3620.0, superTrendDirection: "up",
      parabolicSAR: 3680.0, sarTrend: "up",
      ichimokuTenkan: 3710.0, ichimokuKijun: 3685.0,
      ichimokuSenkouA: 3697.0, ichimokuSenkouB: 3670.0, ichimokuCloudSignal: "above",
      weeklyTrend: makeWeekly(WEEKLY_ALIGNED, 3720.0, 3630.0),
      divergences: NO_DIVERGENCE,
    },
  },
  {
    stock: {
      symbol: "SUNPHARMA",
      name: "Sun Pharmaceutical Industries",
      exchange: "NSE",
      sector: "Pharma",
      marketCap: 410000,
      lastPrice: 1710.0,
      change: -22.0,
      changePercent: -1.27,
      volume: 6500000,
      avgDailyTurnover: 75.0,
      open: 1728.0,
      high: 1732.0,
      low: 1705.0,
      close: 1710.0,
      previousClose: 1732.0,
    },
    indicators: {
      ema20: 1698.0, ema50: 1670.0, ema200: 1580.0,
      rsi14: 49.8, adx14: 27.5, plusDI: 23.0, minusDI: 16.5,
      atr14: 24.0, relativeStrength3M: 6.2, volumeSMA20: 5100000,
      volumeRecent3: [4800000, 5500000, 6500000] as [number, number, number], vroc20: 132,
      weekChange: -3.1,
      macdLine: 8.0, macdSignal: 6.0, macdHistogram: 2.0,
      stochasticK: 48.0, stochasticD: 50.0,
      williamsR: -48.0, roc14: 1.5, cci20: 25.0,
      bollingerUpper: 1755.0, bollingerMiddle: 1710.0, bollingerLower: 1665.0,
      bollingerPercentB: 0.50, bollingerBandwidth: 0.053,
      obv: 22000000, obvTrend: "up",
      mfi14: 52.0,
      adLineTrend: "up",
      superTrend: 1650.0, superTrendDirection: "up",
      parabolicSAR: 1685.0, sarTrend: "up",
      ichimokuTenkan: 1705.0, ichimokuKijun: 1690.0,
      ichimokuSenkouA: 1697.0, ichimokuSenkouB: 1680.0, ichimokuCloudSignal: "above",
      weeklyTrend: makeWeekly(WEEKLY_ALIGNED, 1710.0, 1660.0),
      divergences: BULLISH_RSI_DIV,
    },
  },
  {
    stock: {
      symbol: "MARUTI",
      name: "Maruti Suzuki India Ltd",
      exchange: "NSE",
      sector: "Automobile",
      marketCap: 380000,
      lastPrice: 12450.0,
      change: -180.0,
      changePercent: -1.43,
      volume: 1900000,
      avgDailyTurnover: 155.0,
      open: 12600.0,
      high: 12620.0,
      low: 12420.0,
      close: 12450.0,
      previousClose: 12630.0,
    },
    indicators: {
      ema20: 12380.0, ema50: 12200.0, ema200: 11600.0,
      rsi14: 50.2, adx14: 28.3, plusDI: 22.5, minusDI: 17.5,
      atr14: 185.0, relativeStrength3M: 3.8, volumeSMA20: 1500000,
      volumeRecent3: [1400000, 1600000, 1900000] as [number, number, number], vroc20: 127,
      weekChange: -2.2,
      macdLine: 55.0, macdSignal: 42.0, macdHistogram: 13.0,
      stochasticK: 48.0, stochasticD: 50.0,
      williamsR: -50.0, roc14: 1.2, cci20: 20.0,
      bollingerUpper: 12750.0, bollingerMiddle: 12420.0, bollingerLower: 12090.0,
      bollingerPercentB: 0.55, bollingerBandwidth: 0.053,
      obv: 12000000, obvTrend: "up",
      mfi14: 50.0,
      adLineTrend: "up",
      superTrend: 12050.0, superTrendDirection: "up",
      parabolicSAR: 12280.0, sarTrend: "up",
      ichimokuTenkan: 12420.0, ichimokuKijun: 12320.0,
      ichimokuSenkouA: 12370.0, ichimokuSenkouB: 12250.0, ichimokuCloudSignal: "above",
      weeklyTrend: makeWeekly(WEEKLY_ALIGNED, 12450.0, 12100.0),
      divergences: NO_DIVERGENCE,
    },
  },
  {
    stock: {
      symbol: "TITAN",
      name: "Titan Company Ltd",
      exchange: "NSE",
      sector: "Consumer",
      marketCap: 310000,
      lastPrice: 3520.0,
      change: -38.0,
      changePercent: -1.07,
      volume: 4000000,
      avgDailyTurnover: 102.0,
      open: 3555.0,
      high: 3560.0,
      low: 3510.0,
      close: 3520.0,
      previousClose: 3558.0,
    },
    indicators: {
      ema20: 3505.0, ema50: 3460.0, ema200: 3280.0,
      rsi14: 53.9, adx14: 30.1, plusDI: 25.0, minusDI: 15.0,
      atr14: 48.0, relativeStrength3M: 5.5, volumeSMA20: 3200000,
      volumeRecent3: [3000000, 3500000, 4000000] as [number, number, number], vroc20: 125,
      weekChange: -1.9,
      macdLine: 14.0, macdSignal: 10.0, macdHistogram: 4.0,
      stochasticK: 56.0, stochasticD: 53.0,
      williamsR: -38.0, roc14: 2.2, cci20: 42.0,
      bollingerUpper: 3600.0, bollingerMiddle: 3520.0, bollingerLower: 3440.0,
      bollingerPercentB: 0.50, bollingerBandwidth: 0.045,
      obv: 25000000, obvTrend: "up",
      mfi14: 56.0,
      adLineTrend: "up",
      superTrend: 3420.0, superTrendDirection: "up",
      parabolicSAR: 3480.0, sarTrend: "up",
      ichimokuTenkan: 3515.0, ichimokuKijun: 3490.0,
      ichimokuSenkouA: 3502.0, ichimokuSenkouB: 3470.0, ichimokuCloudSignal: "above",
      weeklyTrend: makeWeekly(WEEKLY_ALIGNED, 3520.0, 3440.0),
      divergences: NO_DIVERGENCE,
    },
  },
  {
    stock: {
      symbol: "HINDUNILVR",
      name: "Hindustan Unilever Ltd",
      exchange: "NSE",
      sector: "FMCG",
      marketCap: 560000,
      lastPrice: 2380.0,
      change: -15.0,
      changePercent: -0.63,
      volume: 5200000,
      avgDailyTurnover: 92.0,
      open: 2392.0,
      high: 2395.0,
      low: 2375.0,
      close: 2380.0,
      previousClose: 2395.0,
    },
    indicators: {
      ema20: 2370.0, ema50: 2340.0, ema200: 2250.0,
      rsi14: 51.2, adx14: 26.8, plusDI: 22.0, minusDI: 16.0,
      atr14: 28.0, relativeStrength3M: 2.8, volumeSMA20: 4200000,
      volumeRecent3: [3800000, 4500000, 5200000] as [number, number, number], vroc20: 115,
      weekChange: -1.1,
      macdLine: 8.0, macdSignal: 5.5, macdHistogram: 2.5,
      stochasticK: 54.0, stochasticD: 52.0,
      williamsR: -42.0, roc14: 1.0, cci20: 28.0,
      bollingerUpper: 2420.0, bollingerMiddle: 2375.0, bollingerLower: 2330.0,
      bollingerPercentB: 0.56, bollingerBandwidth: 0.038,
      obv: 18000000, obvTrend: "up",
      mfi14: 54.0,
      adLineTrend: "up",
      superTrend: 2310.0, superTrendDirection: "up",
      parabolicSAR: 2355.0, sarTrend: "up",
      ichimokuTenkan: 2375.0, ichimokuKijun: 2360.0,
      ichimokuSenkouA: 2367.0, ichimokuSenkouB: 2350.0, ichimokuCloudSignal: "above",
      weeklyTrend: makeWeekly(WEEKLY_ALIGNED, 2380.0, 2330.0),
      divergences: NO_DIVERGENCE,
    },
  },
  // AVOID candidates - fails Phase 1
  {
    stock: {
      symbol: "SMALLCAP1",
      name: "ABC Micro Industries",
      exchange: "NSE",
      sector: "Chemicals",
      marketCap: 2500,
      lastPrice: 125.0,
      change: -5.0,
      changePercent: -3.85,
      volume: 450000,
      avgDailyTurnover: 5.6,
      open: 130.0,
      high: 131.0,
      low: 124.0,
      close: 125.0,
      previousClose: 130.0,
    },
    indicators: {
      ema20: 128.0, ema50: 132.0, ema200: 140.0,
      rsi14: 28.5, adx14: 42.0, plusDI: 8.0, minusDI: 35.0,
      atr14: 4.5, relativeStrength3M: -12.5, volumeSMA20: 520000,
      volumeRecent3: [600000, 500000, 450000] as [number, number, number], vroc20: 72,
      weekChange: -8.2,
      macdLine: -3.5, macdSignal: -1.5, macdHistogram: -2.0,
      stochasticK: 12.0, stochasticD: 18.0,
      williamsR: -92.0, roc14: -8.5, cci20: -180.0,
      bollingerUpper: 138.0, bollingerMiddle: 130.0, bollingerLower: 122.0,
      bollingerPercentB: 0.19, bollingerBandwidth: 0.123,
      obv: -5000000, obvTrend: "down",
      mfi14: 22.0,
      adLineTrend: "down",
      superTrend: 136.0, superTrendDirection: "down",
      parabolicSAR: 133.0, sarTrend: "down",
      ichimokuTenkan: 127.0, ichimokuKijun: 132.0,
      ichimokuSenkouA: 129.5, ichimokuSenkouB: 135.0, ichimokuCloudSignal: "below",
      weeklyTrend: makeWeekly(WEEKLY_COUNTER, 125.0, 135.0),
      divergences: NO_DIVERGENCE,
    },
  },
];

// Historical price data for charting
export function generateHistoricalPrices(
  basePrice: number,
  days: number = 90
): Array<{ date: string; close: number; volume: number }> {
  const data: Array<{ date: string; close: number; volume: number }> = [];
  let price = basePrice * 0.85;
  const now = new Date();

  for (let i = days; i >= 0; i--) {
    const date = new Date(now);
    date.setDate(date.getDate() - i);

    // Skip weekends
    if (date.getDay() === 0 || date.getDay() === 6) continue;

    const change = (Math.random() - 0.45) * basePrice * 0.02;
    price = Math.max(price + change, basePrice * 0.7);

    data.push({
      date: date.toISOString().split("T")[0],
      close: Math.round(price * 100) / 100,
      volume: Math.floor(Math.random() * 5000000 + 1000000),
    });
  }

  return data;
}
